# Tongly - Языковая платформа для обучения

Tongly - это комплексная платформа для изучения языков, которая соединяет студентов и преподавателей через видеоуроки, чаты и интерактивные игры. Платформа построена на микросервисной архитектуре с использованием Docker-контейнеров.

Взаимодействие компонентов (Есть возможность использовать https с использованием сертификатов пока что только для localhost, поэтому в схеме указан http)
<img width="1658" height="661" alt="image" src="https://github.com/user-attachments/assets/eaeedfda-83ee-49e8-a9c2-625d4b0401ff" />

База данных
<img width="1180" height="944" alt="image" src="https://github.com/user-attachments/assets/ce2d6e47-e9c4-48b6-aa52-fdf8bd0ca2d2" />

Фильтры для поиска преподавателей
<img width="340" height="870" alt="image" src="https://github.com/user-attachments/assets/aa36e371-fbda-4ff7-aa8d-93a060cca22b" />

Поиск преподавателей
<img width="1482" height="772" alt="image" src="https://github.com/user-attachments/assets/385a0c1a-5dc6-4121-a754-81db455a4972" />

Проведение урока для пользователя с ПК
<img width="1014" height="844" alt="image" src="https://github.com/user-attachments/assets/c068a8d5-80a2-4821-aba4-b4f302099d18" />

Проведение урока для пользователя со смартфона
<img width="411" height="841" alt="image" src="https://github.com/user-attachments/assets/bf40d6b1-2c9b-4e22-b2bb-f250278ccc8f" />

Выбор языковых игр
<img width="1489" height="841" alt="image" src="https://github.com/user-attachments/assets/9888d7af-38f3-4c21-9b59-d31f828fd9f3" />

Игровой процесс
<img width="999" height="639" alt="image" src="https://github.com/user-attachments/assets/e9e3cf75-7c4f-4fb8-b24b-280d4067a70d" />
<img width="1083" height="544" alt="image" src="https://github.com/user-attachments/assets/3de04dbb-70ba-4258-8d77-e2a44ee770b6" />

Таблица лидеров
<img width="1077" height="844" alt="image" src="https://github.com/user-attachments/assets/6505ff76-8651-453b-86fa-b26298e34e00" />

Главная страница
<img width="991" height="596" alt="image" src="https://github.com/user-attachments/assets/d6f27e65-a337-4e83-9c9a-b66f74c01116" />


## Архитектура проекта

Проект состоит из четырех основных компонентов:

1. **Frontend** (React/TypeScript)
2. **Backend API** (Golang/Gin)
3. **Video-service** (Golang/Fiber)
4. **База данных** (PostgreSQL)


## Технологический стек

### Frontend
- **Язык программирования**: TypeScript
- **Фреймворк**: React
- **Стилизация**: Tailwind CSS
- **HTTP-клиент**: Axios
- **Веб-сервер**: Nginx

### Backend
- **Язык программирования**: Go 1.23
- **Фреймворк**: Gin
- **База данных**: PostgreSQL
- **Аутентификация**: JWT
- **Миграции**: golang-migrate

### Video-service
- **Язык программирования**: Go 1.23
- **Фреймворк для веб-сервера**: Fiber
- **Технология видеосвязи**: WebRTC 
- **Протокол коммуникации**: WebSocket

## Компоненты системы

### Frontend (frontend/)

Frontend реализован на React с TypeScript и обеспечивает пользовательский интерфейс для всей платформы. Основные функции:

- Регистрация и авторизация пользователей
- Личный кабинет студента/преподавателя
- Поиск преподавателей и бронирование уроков
- Страница видеоурока с интеграцией Video-service
- Интерактивные языковые игры
- Настройки пользовательских предпочтений

Запросы к API выполняются через клиент Axios с настроенной авторизацией через JWT. Маршрутизация осуществляется через React Router с разделением на публичные и защищенные маршруты.

Статические файлы раздаются через Nginx, который также выступает в роли прокси для API-запросов к backend и video-service.

### Backend API (backend/)

Backend реализован на Go с использованием фреймворка Gin и следует принципам чистой архитектуры:

- **cmd/server/**: точка входа приложения
- **internal/**: внутренние пакеты приложения
  - **config/**: конфигурация приложения
  - **database/**: подключение к базе данных и миграции
  - **entities/**: бизнес-модели
  - **handlers/**: обработчики HTTP-запросов
  - **middleware/**: промежуточное ПО для авторизации, логирования и т.д.
  - **repositories/**: слой доступа к данным
  - **router/**: настройка маршрутизации
  - **usecases/**: бизнес-логика приложения
- **pkg/**: общие утилиты (JWT, валидация и т.д.)
- **migrations/**: SQL-миграции для создания схемы БД

API поддерживает следующую функциональность:
- Авторизация и аутентификация пользователей
- Управление профилями студентов и преподавателей
- Планирование и управление уроками
- Хранение пользовательских настроек
- Предоставление данных для языковых игр

### Video-service (video-service/)

Video-service - это специализированный микросервис для организации видеоконференций между студентами и преподавателями. Построен на технологии WebRTC с использованием библиотеки Pion:

- **cmd/**: точка входа приложения
- **internal/**: внутренняя логика
  - **handlers/**: обработчики HTTP-запросов и WebSocket
  - **server/**: конфигурация веб-сервера
- **pkg/**: основные компоненты
  - **chat/**: текстовый чат во время видеоконференций
  - **webrtc/**: логика соединения WebRTC
- **views/**: HTML-шаблоны
- **assets/**: статические файлы (JavaScript, CSS)

Функциональность:
- Создание и управление виртуальными комнатами
- Установка WebRTC-соединений для обмена аудио/видео потоками
- Текстовый чат в реальном времени
- Демонстрация экрана (опционально)

### База данных (PostgreSQL)

PostgreSQL используется для хранения всех данных платформы:
- Пользовательские аккаунты и профили
- Запланированные уроки
- Языки, интересы и цели обучения
- Данные игр и статистика

## Взаимодействие компонентов

1. **Пользователь → Frontend → Backend** - Запросы к API для получения/изменения данных
2. **Пользователь → Frontend → Video-service** - Установка WebRTC-соединения для видеозвонков
3. **Backend ↔ База данных** - Сохранение и получение данных
4. **Video-service ↔ WebRTC** - Обмен медиапотоками между участниками

## Запуск проекта

Проект развертывается с помощью Docker Compose:

```bash
docker-compose up -d
```

После запуска будут доступны:
- Frontend: https://localhost:443
- Backend API: https://localhost:8080
- Video-service: https://localhost:8081

## Разработка

Для разработки каждый компонент может быть запущен отдельно:

### Frontend
```bash
cd frontend
npm install
npm run dev
```

### Backend
```bash
cd backend
go run cmd/server/main.go
```

### Video-service
```bash
cd video-service
go run cmd/main.go
```

## Безопасность

Проект использует следующие механизмы безопасности:
- HTTPS для всех соединений
- JWT для аутентификации
- Безопасное хранение паролей (bcrypt)
- Валидация и санитизация входных данных

