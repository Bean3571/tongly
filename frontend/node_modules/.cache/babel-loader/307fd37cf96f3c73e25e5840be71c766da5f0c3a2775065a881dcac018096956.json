{"ast":null,"code":"import axios from 'axios';\nconst baseURL = process.env.REACT_APP_API_URL || 'http://localhost:8080';\nconst apiClient = axios.create({\n  baseURL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token && config.headers) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Add response interceptor for 401 errors\napiClient.interceptors.response.use(response => response, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    localStorage.removeItem('token');\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\nexport const api = {\n  auth: {\n    login: credentials => apiClient.post('/api/auth/login', credentials).then(res => res.data),\n    register: data => apiClient.post('/api/auth/register', data).then(res => res.data)\n  },\n  user: {\n    getProfile: () => apiClient.get('/api/profile').then(res => res.data),\n    updateProfile: data => apiClient.put('/api/profile', data).then(res => res.data),\n    updatePassword: (oldPassword, newPassword) => apiClient.put('/api/profile/password', {\n      oldPassword,\n      newPassword\n    }).then(res => res.data)\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","baseURL","process","env","REACT_APP_API_URL","apiClient","create","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","error","_error$response","status","removeItem","window","location","href","Promise","reject","api","auth","login","credentials","post","then","res","data","register","user","getProfile","get","updateProfile","put","updatePassword","oldPassword","newPassword"],"sources":["C:/Custom/Coding/tongly-basic/tongly-basic/frontend/src/api/client.ts"],"sourcesContent":["import axios from 'axios';\r\nimport type { AxiosRequestConfig } from 'axios/index';\r\nimport type { LanguageLevel } from '../types';\r\n\r\nconst baseURL = process.env.REACT_APP_API_URL || 'http://localhost:8080';\r\n\r\nconst apiClient = axios.create({\r\n    baseURL,\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n    },\r\n});\r\n\r\napiClient.interceptors.request.use((config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token && config.headers) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n});\r\n\r\n// Add response interceptor for 401 errors\r\napiClient.interceptors.response.use(\r\n    (response) => response,\r\n    (error) => {\r\n        if (error.response?.status === 401) {\r\n            localStorage.removeItem('token');\r\n            window.location.href = '/login';\r\n        }\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\ninterface LoginCredentials {\r\n    username: string;\r\n    password: string;\r\n}\r\n\r\ninterface RegisterData {\r\n    username: string;\r\n    email: string;\r\n    password: string;\r\n    role: string;\r\n}\r\n\r\nexport interface ProfileUpdateData {\r\n    email?: string;\r\n    first_name?: string | null;\r\n    last_name?: string | null;\r\n    profile_picture?: string | null;\r\n    age?: number | null;\r\n    native_language?: string | null;\r\n    languages?: LanguageLevel[];\r\n    interests?: string[];\r\n    learning_goals?: string[];\r\n    survey_complete?: boolean;\r\n}\r\n\r\nexport const api = {\r\n    auth: {\r\n        login: (credentials: LoginCredentials) =>\r\n            apiClient.post('/api/auth/login', credentials).then(res => res.data),\r\n        register: (data: RegisterData) =>\r\n            apiClient.post('/api/auth/register', data).then(res => res.data),\r\n    },\r\n    user: {\r\n        getProfile: () => apiClient.get('/api/profile').then(res => res.data),\r\n        updateProfile: (data: ProfileUpdateData) =>\r\n            apiClient.put('/api/profile', data).then(res => res.data),\r\n        updatePassword: (oldPassword: string, newPassword: string) =>\r\n            apiClient.put('/api/profile/password', { oldPassword, newPassword }).then(res => res.data),\r\n    },\r\n};\r\n\r\nexport default api; "],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAIzB,MAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,uBAAuB;AAExE,MAAMC,SAAS,GAAGL,KAAK,CAACM,MAAM,CAAC;EAC3BL,OAAO;EACPM,OAAO,EAAE;IACL,cAAc,EAAE;EACpB;AACJ,CAAC,CAAC;AAEFF,SAAS,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EAC3C,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,IAAID,MAAM,CAACJ,OAAO,EAAE;IACzBI,MAAM,CAACJ,OAAO,CAACQ,aAAa,GAAG,UAAUH,KAAK,EAAE;EACpD;EACA,OAAOD,MAAM;AACjB,CAAC,CAAC;;AAEF;AACAN,SAAS,CAACG,YAAY,CAACQ,QAAQ,CAACN,GAAG,CAC9BM,QAAQ,IAAKA,QAAQ,EACrBC,KAAK,IAAK;EAAA,IAAAC,eAAA;EACP,IAAI,EAAAA,eAAA,GAAAD,KAAK,CAACD,QAAQ,cAAAE,eAAA,uBAAdA,eAAA,CAAgBC,MAAM,MAAK,GAAG,EAAE;IAChCN,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC;IAChCC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACnC;EACA,OAAOC,OAAO,CAACC,MAAM,CAACR,KAAK,CAAC;AAChC,CACJ,CAAC;AA2BD,OAAO,MAAMS,GAAG,GAAG;EACfC,IAAI,EAAE;IACFC,KAAK,EAAGC,WAA6B,IACjCxB,SAAS,CAACyB,IAAI,CAAC,iBAAiB,EAAED,WAAW,CAAC,CAACE,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC;IACxEC,QAAQ,EAAGD,IAAkB,IACzB5B,SAAS,CAACyB,IAAI,CAAC,oBAAoB,EAAEG,IAAI,CAAC,CAACF,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI;EACvE,CAAC;EACDE,IAAI,EAAE;IACFC,UAAU,EAAEA,CAAA,KAAM/B,SAAS,CAACgC,GAAG,CAAC,cAAc,CAAC,CAACN,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC;IACrEK,aAAa,EAAGL,IAAuB,IACnC5B,SAAS,CAACkC,GAAG,CAAC,cAAc,EAAEN,IAAI,CAAC,CAACF,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI,CAAC;IAC7DO,cAAc,EAAEA,CAACC,WAAmB,EAAEC,WAAmB,KACrDrC,SAAS,CAACkC,GAAG,CAAC,uBAAuB,EAAE;MAAEE,WAAW;MAAEC;IAAY,CAAC,CAAC,CAACX,IAAI,CAACC,GAAG,IAAIA,GAAG,CAACC,IAAI;EACjG;AACJ,CAAC;AAED,eAAeP,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}